# Fail on first error
set -e

# Run type check, lint and prettier check before pushing
npm run test:type-check
npm run lint
npm run format:check

# Generate LLM-friendly docs surface and ensure it's committed
echo "Generating llms.txtâ€¦"
npm run llms:gen

# If llms.txt changed, abort push so it can be committed
if ! git diff --quiet -- llms.txt; then
  echo "\nllms.txt was updated by the generator."
  echo "Please add and commit llms.txt, then push again."
  exit 1
fi
